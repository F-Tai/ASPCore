@{
    ViewData["Title"] = "Tìm kiếm";
}

<h2>Tìm kiếm hàng hóa</h2>
<div>Theo tên <input type="text" id="txtTen" placeholder="Nhập tên" /></div>
<div>
    Giá từ <input type="number" min="0" id="txtGiaTu" />
    đến <input type="number" min="0" id="txtGiaDen" />
    <input type="button" id="btnTim" value="Tìm" />
</div>
<h2>Kết quả</h2>
<table class="table table-condensed">
    <thead>
        <tr>
            <th>STT</th>
            <th>Hình</th>
            <th>Tên hàng hóa</th>
            <th>Đơn giá</th>
            <th>Loại</th>
        </tr>
    </thead>
    <tbody id="content"></tbody>
</table>
@section Scripts {
    <script>
        $(function () {
            $("#btnTim").click(function (e) {
                e.preventDefault();
                $.ajax({
                    url: "/Ajax/JsonSearch",
                    type: "post",
                    data: {
                        TenHh: $("#txtTen").val(),
                        GiaTu: $("#txtGiaTu").val(),
                        GiaDen: $("#GiaDen").val()
                    },
                    dataType: "json",
                    success: function (respones) {
                        //console.log(respones);
                        $(respones).each(function (index, element) {
                            console.log(element.tenLoai);
                            let tr = $("<tr/>");
                            $("<td/>").html(index + 1).appendTo(tr);
                            $("<td/>").html("<img src='../../Hinh/HangHoa/" + element.hinh + "'  height='80' /> ").appendTo(tr);
                            //$("<td/>").html(element.hinh).appendTo(tr);
                            $("<td/>").html(element.tenHh).appendTo(tr);
                            $("<td/>").html(element.donGia).appendTo(tr);
                            $("<td/>").html(element.maLoai).appendTo(tr);

                            tr.appendTo($("#content"));
                            //$("#content").append(tr);
                        });
                    },
                    error: function (xhr) {

                    }
                });
            });
        });
    </script>
}
